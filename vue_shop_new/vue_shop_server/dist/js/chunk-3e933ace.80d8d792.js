(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e933ace"],{1276:function(t,e,a){"use strict";var n=a("d784"),r=a("44e7"),i=a("825a"),s=a("1d80"),l=a("4840"),o=a("8aa5"),c=a("50c4"),u=a("14c3"),d=a("9263"),p=a("d039"),f=[].push,m=Math.min,h=4294967295,g=!p((function(){return!RegExp(h,"y")}));n("split",2,(function(t,e,a){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,a){var n=String(s(this)),i=void 0===a?h:a>>>0;if(0===i)return[];if(void 0===t)return[n];if(!r(t))return e.call(n,t,i);var l,o,c,u=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),m=0,g=new RegExp(t.source,p+"g");while(l=d.call(g,n)){if(o=g.lastIndex,o>m&&(u.push(n.slice(m,l.index)),l.length>1&&l.index<n.length&&f.apply(u,l.slice(1)),c=l[0].length,m=o,u.length>=i))break;g.lastIndex===l.index&&g.lastIndex++}return m===n.length?!c&&g.test("")||u.push(""):u.push(n.slice(m)),u.length>i?u.slice(0,i):u}:"0".split(void 0,0).length?function(t,a){return void 0===t&&0===a?[]:e.call(this,t,a)}:e,[function(e,a){var r=s(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,r,a):n.call(String(r),e,a)},function(t,r){var s=a(n,t,this,r,n!==e);if(s.done)return s.value;var d=i(t),p=String(this),f=l(d,RegExp),b=d.unicode,v=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(g?"y":"g"),x=new f(g?d:"^(?:"+d.source+")",v),y=void 0===r?h:r>>>0;if(0===y)return[];if(0===p.length)return null===u(x,p)?[p]:[];var w=0,_=0,k=[];while(_<p.length){x.lastIndex=g?_:0;var R,C=u(x,g?p:p.slice(_));if(null===C||(R=m(c(x.lastIndex+(g?0:_)),p.length))===w)_=o(p,_,b);else{if(k.push(p.slice(w,_)),k.length===y)return k;for(var D=1;D<=C.length-1;D++)if(k.push(C[D]),k.length===y)return k;_=w=R}}return k.push(p.slice(w)),k}]}),!g)},"14c3":function(t,e,a){var n=a("c6b6"),r=a("9263");t.exports=function(t,e){var a=t.exec;if("function"===typeof a){var i=a.call(t,e);if("object"!==typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(t))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},"253e":function(t,e,a){"use strict";var n=a("91f9"),r=a.n(n);r.a},"3b0d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Header"),a("el-card",[a("el-alert",{attrs:{"show-icon":"",title:"注意：只允许为第三级分类设置相关参数！",type:"warning",closable:!1}}),a("el-row",{staticClass:"cat_opt"},[a("el-col",[a("span",[t._v("选择商品分类：")]),a("el-cascader",{attrs:{"expand-trigger":"hover",options:t.catelist,props:t.cateProps},on:{change:t.handleChange},model:{value:t.selectedCateKeys,callback:function(e){t.selectedCateKeys=e},expression:"selectedCateKeys"}})],1)],1),a("el-tabs",{on:{"tab-click":t.handleTabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"动态参数",name:"many"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.isBtnDisabled},on:{click:function(e){t.addDialogVisible=!0}}},[t._v("添加参数")]),a("el-table",{attrs:{data:t.manyTableData,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.attr_vals,(function(n,r){return a("el-tag",{key:r,attrs:{closable:""},on:{close:function(a){return t.handleClose(r,e.row)}}},[t._v(t._s(n))])})),e.row.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(a){return t.handleInputConfirm(e.row)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleInputConfirm(e.row)}},model:{value:e.row.inputValue,callback:function(a){t.$set(e.row,"inputValue",a)},expression:"scope.row.inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(a){return t.showInput(e.row)}}},[t._v("+ New Tag")])]}}])}),a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{label:"参数名称",prop:"attr_name"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return t.showEditDialog(e.row.attr_id)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return t.removeParams(e.row.attr_id)}}},[t._v("删除")])]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"静态属性",name:"only"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.isBtnDisabled},on:{click:function(e){t.addDialogVisible=!0}}},[t._v("添加属性")]),a("el-table",{attrs:{data:t.onlyTableData,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.attr_vals,(function(n,r){return a("el-tag",{key:r,attrs:{closable:""},on:{close:function(a){return t.handleClose(r,e.row)}}},[t._v(t._s(n))])})),e.row.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(a){return t.handleInputConfirm(e.row)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleInputConfirm(e.row)}},model:{value:e.row.inputValue,callback:function(a){t.$set(e.row,"inputValue",a)},expression:"scope.row.inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(a){return t.showInput(e.row)}}},[t._v("+ New Tag")])]}}])}),a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{label:"属性名称",prop:"attr_name"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return t.showEditDialog(e.row.attr_id)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return t.removeParams(e.row.attr_id)}}},[t._v("删除")])]}}])})],1)],1)],1)],1),a("el-dialog",{attrs:{title:"添加"+t.titleText,visible:t.addDialogVisible,width:"50%"},on:{"update:visible":function(e){t.addDialogVisible=e},close:t.addDialogClosed}},[a("el-form",{ref:"addFormRef",attrs:{model:t.addForm,rules:t.addFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:t.titleText,prop:"attr_name"}},[a("el-input",{model:{value:t.addForm.attr_name,callback:function(e){t.$set(t.addForm,"attr_name",e)},expression:"addForm.attr_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addParams}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"修改"+t.titleText,visible:t.editDialogVisible,width:"50%"},on:{"update:visible":function(e){t.editDialogVisible=e},close:t.editDialogClosed}},[a("el-form",{ref:"editFormRef",attrs:{model:t.editForm,rules:t.editFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:t.titleText,prop:"attr_name"}},[a("el-input",{model:{value:t.editForm.attr_name,callback:function(e){t.$set(t.editForm,"attr_name",e)},expression:"editForm.attr_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.editParams}},[t._v("确 定")])],1)],1)],1)},r=[],i=(a("99af"),a("a15b"),a("a434"),a("d3b7"),a("1276"),a("498a"),a("159b"),a("96cf"),a("a960")),s={data:function(){return{catelist:[],cateProps:{value:"cat_id",label:"cat_name",children:"children"},selectedCateKeys:[],activeName:"many",manyTableData:[],onlyTableData:[],addDialogVisible:!1,addForm:{attr_name:""},addFormRules:{attr_name:[{required:!0,message:"请输入参数名称",trigger:"blur"}]},editDialogVisible:!1,editForm:{},editFormRules:{attr_name:[{required:!0,message:"请输入参数名称",trigger:"blur"}]}}},computed:{isBtnDisabled:function(){return 3!==this.selectedCateKeys.length},cateId:function(){return 3===this.selectedCateKeys.length?this.selectedCateKeys[2]:null},titleText:function(){return"many"===this.activeName?"动态参数":"静态属性"}},components:{Header:i["a"]},created:function(){this.getCateList()},methods:{getCateList:function(){var t,e;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.$http.get("categories"));case 2:if(t=a.sent,e=t.data,200===e.meta.status){a.next=6;break}return a.abrupt("return",this.$message.error("获取商品分类失败！"));case 6:this.catelist=e.data;case 7:case"end":return a.stop()}}),null,this)},handleChange:function(){this.getParamsData()},handleTabClick:function(){this.getParamsData()},getParamsData:function(){var t,e;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:if(3===this.selectedCateKeys.length){a.next=5;break}return this.selectedCateKeys=[],this.manyTableData=[],this.onlyTableData=[],a.abrupt("return");case 5:return a.next=7,regeneratorRuntime.awrap(this.$http.get("categories/".concat(this.cateId,"/attributes"),{params:{sel:this.activeName}}));case 7:if(t=a.sent,e=t.data,200===e.meta.status){a.next=11;break}return a.abrupt("return",this.$message.error("获取参数列表失败！"));case 11:e.data.forEach((function(t){t.attr_vals=t.attr_vals?t.attr_vals.split(" "):[],t.inputVisible=!1,t.inputValue=""})),"many"===this.activeName?this.manyTableData=e.data:this.onlyTableData=e.data;case 13:case"end":return a.stop()}}),null,this)},addDialogClosed:function(){this.$refs.addFormRef.resetFields()},addParams:function(){var t=this;this.$refs.addFormRef.validate((function(e){var a,n;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,regeneratorRuntime.awrap(t.$http.post("categories/".concat(t.cateId,"/attributes"),{attr_name:t.addForm.attr_name,attr_sel:t.activeName}));case 4:if(a=r.sent,n=a.data,201===n.meta.status){r.next=8;break}return r.abrupt("return",t.$message.error("添加参数失败！"));case 8:t.$message.success("添加参数成功！"),t.addDialogVisible=!1,t.getParamsData();case 11:case"end":return r.stop()}}))}))},showEditDialog:function(t){var e,a;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.$http.get("categories/".concat(this.cateId,"/attributes/").concat(t),{params:{attr_sel:this.activeName}}));case 2:if(e=n.sent,a=e.data,200===a.meta.status){n.next=6;break}return n.abrupt("return",this.$message.error("获取参数列表失败！"));case 6:this.editForm=a.data,this.editDialogVisible=!0;case 8:case"end":return n.stop()}}),null,this)},editDialogClosed:function(){this.$refs.editFormRef.resetFields()},editParams:function(){var t=this;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:this.$refs.editFormRef.validate((function(e){var a,n;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(t.$http.put("categories/".concat(t.cateId,"/attributes/").concat(t.editForm.attr_id),{attr_name:t.editForm.attr_name,attr_sel:t.activeName}));case 2:if(a=e.sent,n=a.data,200===n.meta.status){e.next=6;break}return e.abrupt("return",t.$message.error("获取参数列表失败！"));case 6:t.$message.success("修改参数成功！"),t.getParamsData(),t.editDialogVisible=!1;case 9:case"end":return e.stop()}}))}));case 1:case"end":return e.stop()}}),null,this)},removeParams:function(t){var e,a,n;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(this.$confirm("此操作将永久删除该参数, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(t){return t})));case 2:if(e=r.sent,"confirm"===e){r.next=5;break}return r.abrupt("return",this.$message.info("已取消删除！"));case 5:return r.next=7,regeneratorRuntime.awrap(this.$http.delete("categories/".concat(this.cateId,"/attributes/").concat(t)));case 7:if(a=r.sent,n=a.data,200===n.meta.status){r.next=11;break}return r.abrupt("return",this.$message.error("删除参数失败！"));case 11:this.$message.success("删除参数成功！"),this.getParamsData();case 13:case"end":return r.stop()}}),null,this)},showInput:function(t){var e=this;t.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(t){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.inputValue.trim().length){e.next=4;break}return t.inputValue="",t.inputVisible=!1,e.abrupt("return");case 4:t.attr_vals.push(t.inputValue.trim()),t.inputValue="",t.inputVisible=!1,this.saveAttrVals(t);case 8:case"end":return e.stop()}}),null,this)},saveAttrVals:function(t){var e,a;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.$http.put("categories/".concat(this.cateId,"/attributes/").concat(t.attr_id),{attr_name:t.attr_name,attr_sel:t.attr_sel,attr_vals:t.attr_vals.join(" ")}));case 2:if(e=n.sent,a=e.data,200===a.meta.status){n.next=6;break}return n.abrupt("return",this.$message.error("修改参数项失败！"));case 6:this.$message.success("修改参数项成功！");case 7:case"end":return n.stop()}}),null,this)},handleClose:function(t,e){e.attr_vals.splice(t,1),this.saveAttrVals(e)}}},l=s,o=(a("253e"),a("2877")),c=Object(o["a"])(l,n,r,!1,null,"381a16d4",null);e["default"]=c.exports},"44e7":function(t,e,a){var n=a("861d"),r=a("c6b6"),i=a("b622"),s=i("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==r(t))}},"498a":function(t,e,a){"use strict";var n=a("23e7"),r=a("58a8").trim,i=a("e070");n({target:"String",proto:!0,forced:i("trim")},{trim:function(){return r(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var n=a("1d80"),r=a("5899"),i="["+r+"]",s=RegExp("^"+i+i+"*"),l=RegExp(i+i+"*$"),o=function(t){return function(e){var a=String(n(e));return 1&t&&(a=a.replace(s,"")),2&t&&(a=a.replace(l,"")),a}};t.exports={start:o(1),end:o(2),trim:o(3)}},"8aa5":function(t,e,a){"use strict";var n=a("6547").charAt;t.exports=function(t,e,a){return e+(a?n(t,e).length:1)}},"91f9":function(t,e,a){},9263:function(t,e,a){"use strict";var n=a("ad6d"),r=RegExp.prototype.exec,i=String.prototype.replace,s=r,l=function(){var t=/a/,e=/b*/g;return r.call(t,"a"),r.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),o=void 0!==/()??/.exec("")[1],c=l||o;c&&(s=function(t){var e,a,s,c,u=this;return o&&(a=new RegExp("^"+u.source+"$(?!\\s)",n.call(u))),l&&(e=u.lastIndex),s=r.call(u,t),l&&s&&(u.lastIndex=u.global?s.index+s[0].length:e),o&&s&&s.length>1&&i.call(s[0],a,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(s[c]=void 0)})),s}),t.exports=s},a434:function(t,e,a){"use strict";var n=a("23e7"),r=a("23cb"),i=a("a691"),s=a("50c4"),l=a("7b0b"),o=a("65f0"),c=a("8418"),u=a("1dde"),d=Math.max,p=Math.min,f=9007199254740991,m="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!u("splice")},{splice:function(t,e){var a,n,u,h,g,b,v=l(this),x=s(v.length),y=r(t,x),w=arguments.length;if(0===w?a=n=0:1===w?(a=0,n=x-y):(a=w-2,n=p(d(i(e),0),x-y)),x+a-n>f)throw TypeError(m);for(u=o(v,n),h=0;h<n;h++)g=y+h,g in v&&c(u,h,v[g]);if(u.length=n,a<n){for(h=y;h<x-n;h++)g=h+n,b=h+a,g in v?v[b]=v[g]:delete v[b];for(h=x;h>x-n+a;h--)delete v[h-1]}else if(a>n)for(h=x-n;h>y;h--)g=h+n-1,b=h+a-1,g in v?v[b]=v[g]:delete v[b];for(h=0;h<a;h++)v[h+y]=arguments[h+2];return v.length=x-n+a,u}})},d784:function(t,e,a){"use strict";var n=a("9112"),r=a("6eeb"),i=a("d039"),s=a("b622"),l=a("9263"),o=s("species"),c=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var a="ab".split(t);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));t.exports=function(t,e,a,d){var p=s(t),f=!i((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),m=f&&!i((function(){var e=!1,a=/a/;return"split"===t&&(a={},a.constructor={},a.constructor[o]=function(){return a},a.flags="",a[p]=/./[p]),a.exec=function(){return e=!0,null},a[p](""),!e}));if(!f||!m||"replace"===t&&!c||"split"===t&&!u){var h=/./[p],g=a(p,""[t],(function(t,e,a,n,r){return e.exec===l?f&&!r?{done:!0,value:h.call(e,a,n)}:{done:!0,value:t.call(a,e,n)}:{done:!1}})),b=g[0],v=g[1];r(String.prototype,t,b),r(RegExp.prototype,p,2==e?function(t,e){return v.call(t,this,e)}:function(t){return v.call(t,this)}),d&&n(RegExp.prototype[p],"sham",!0)}}},e070:function(t,e,a){var n=a("d039"),r=a("5899"),i="​᠎";t.exports=function(t){return n((function(){return!!r[t]()||i[t]()!=i||r[t].name!==t}))}}}]);
//# sourceMappingURL=chunk-3e933ace.80d8d792.js.map